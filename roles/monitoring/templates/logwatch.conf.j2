# Logwatch configuration for Matrix server
# Generated by Ansible

# What level of detail are you interested in?
# High, Med, Low or a number
Detail = {{ logwatch_detail_level | default('Med') }}

# Type of mail service to use
MailTo = {{ monitoring_email | default('root@localhost') }}
MailFrom = Logwatch-{{ inventory_hostname }}

# Print summary
Print = {{ logwatch_print_summary | default('No') }}

# Save summary to file instead of mailing
Save = {{ logwatch_save_to_file | default('/var/cache/logwatch/logwatch') }}

# Mail the results to someone else
# MailTo = nobody

# What format to produce
Format = {{ logwatch_format | default('text') }}

# Where to store temporary files
TmpDir = /var/cache/logwatch

# When to run logwatch
# 'Rotate' means run when logs are rotated
# 'Daily' means run every day at the specified time
Range = {{ logwatch_range | default('yesterday') }}

# What services to monitor
Service = All

# Exclude these services
# Service = "-zz-network"
# Service = "-zz-sys"

# Matrix-specific services
Service = postfix
Service = sshd
Service = fail2ban
Service = kernel
Service = sudo

# Custom filters for Matrix server
LogFile = syslog
LogFile = messages
LogFile = secure
LogFile = mail

{% if matrix_server_enabled | default(true) %}
# Matrix Synapse logs
LogFile = /var/log/matrix-synapse/homeserver.log
{% endif %}

{% if caddy_enabled | default(true) %}
# Caddy access logs
LogFile = {{ caddy_log_dir | default('/var/log/caddy') }}/access.log
LogFile = {{ caddy_log_dir | default('/var/log/caddy') }}/error.log
{% endif %}

# Archive old log summaries
# Archives = Yes

# The hostname to put in the report
HostName = {{ inventory_hostname }}

# SplitHosts = Yes